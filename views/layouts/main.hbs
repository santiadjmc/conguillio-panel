<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <title>{{ title }}</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">
    
    <!-- Highlight.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
</head>

<body>
    <!-- Socket.io setup -->
    <script>const ip = '{{ ip }}';</script>
    <script src="/socket.io/socket.io.js"></script>
    {{#if user}}
    <script>
        const socket = io();
        socket.emit("set-id", "{{user.id}}");
    </script>
    {{/if}}

    <!-- Navigation -->
    {{#if user}}
    <nav class="navbar">
        <div class="navbar-container">
            <a href="/dashboard" class="navbar-brand">
                <i class="fas fa-home"></i>
                Conguillio Panel
            </a>
            <ul class="navbar-menu">
                <li><a href="/dashboard" class="nav-link"><i class="fas fa-home"></i> Inicio</a></li>
                <li><a href="/dashboard/profile" class="nav-link"><i class="fas fa-user"></i> Perfil</a></li>
                <li><a href="/dashboard/users" class="nav-link"><i class="fas fa-users"></i> Usuarios</a></li>
                <li><a href="/dashboard/messages" class="nav-link"><i class="fas fa-comments"></i> Mensajes</a></li>
            </ul>
        </div>
    </nav>
    {{/if}}

    <!-- Main Content -->
    <main class="main-content">
        {{{ body }}}
    </main>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="spinner"></div>
        <p>Cargando...</p>
    </div>

    <!-- Basic Modal -->
    <div id="basic-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h5 id="basic-modal-title"></h5>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p id="basic-modal-message"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary modal-close">OK</button>
            </div>
        </div>
    </div>

    <!-- Interactive Modal -->
    <div id="interactive-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h5 id="interactive-modal-title"></h5>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p id="interactive-modal-message"></p>
            </div>
            <div class="modal-footer" id="interactive-modal-footer">
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="/js/ui.js"></script>
    <script src="/js/utils.js"></script>
    <script src="/js/app.js"></script>

    <!-- Flash Messages -->
    {{#if error}}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            UI.showToast('{{ error }}', 'error');
        });
    </script>
    {{/if}}

    {{#if success}}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            UI.showToast('{{ success }}', 'success');
        });
    </script>
    {{/if}}

    <!-- Highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        if (typeof hljs !== 'undefined') {
            hljs.highlightAll();
        }
    </script>
</body>
</html>